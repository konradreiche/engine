// Code generated by rpcgen; DO NOT EDIT.
//
// Source: rpc/rpc.go
// Template: cmd/rpcgen/server.go.tmpl

package server 

{{range .Endpoints}}
func {{.Name}}Endpoint(r rpc.RPC) protocol.MessageEndpoint {
	return func(ctx context.Context, s *model.Session, pw *protocol.PushWriter, m protocol.Message) error {
		var params rpc.{{.Name}}Params
		if len(m.Data) > 0 {
			err := json.Unmarshal(m.Data, &params)
			if err != nil {
				return protocol.DefaultEncoder(ctx, nil, err, pw)
			}
		}
		err := params.Validate()
		if err != nil {
			return protocol.DefaultEncoder(ctx, nil, err, pw)
		}
		resp, err := r.{{.Name}}(ctx, rpc.{{.Name}}Request{Params: params, Session: s})
		return protocol.DefaultEncoder(ctx, resp, errors.Cause(err), pw)
	}
}
{{end}}
