// Code generated by rpcgen; DO NOT EDIT.
//
// Source: rpc/rpc.go
// Template: cmd/rpcgen/client.go.tmpl

package client

{{range .Endpoints}}
func (c *Client) {{.Name}}(ctx context.Context, req rpc.{{.Name}}Request) (*rpc.{{.Name}}Response, error) {
	m := NewMessage(rpc.{{.Name}})
	err := m.EncodePayload(req.Params)
	if err != nil {
		return nil, err
	}
	responser := c.registerRequest(m.RequestID)
	defer c.unregisterRequest(m.RequestID)
	err = c.w.WriteJSON(m)
	if err != nil {
		return nil, err
	}
	var resp string
	select {
	case resp = <-responser:
	case <-time.After(c.config.Timeout):
		return nil, ErrTimeout
	case <-ctx.Done():
		return nil, ctx.Err()
	}
	m, err = c.DecodeGenericResponse(resp)
	if err != nil {
		return nil, err
	}
	var result rpc.{{.Name}}Response
	err = json.Unmarshal(m.Data, &result)
	return &result, err
}
{{end}}
